{"ast":null,"code":"/**\r\n * @author SK Childéric\r\n * @version 0.0.2\r\n * @description Ce module s'occupe de tout l'aspect Données (Interaction avec la base de données)\r\n */\n\n/**\r\n * @name Session\r\n * @class\r\n * @classdesc Cette classe permet de gérer la session locale de l'utlisateur\r\n * @type {{getUID: (function(): string), deleteUID: (function(): void), setUID: (function(*=): void), clean: Session.clean}}\r\n */\nconst Session = {\n  /**\r\n   * @description retourne l'uid de la session storage\r\n   * @return {string}\r\n   */\n  getUID: () => sessionStorage.getItem('uid'),\n\n  /**\r\n   * @description modifie le token et l'utilisateur de la session storage\r\n   * */\n  setUID: id => sessionStorage.setItem('uid', id),\n\n  /**\r\n   * @description supprimer l'uid de la session storage\r\n   * */\n  deleteUID: () => sessionStorage.removeItem('uid'),\n\n  /**\r\n   * nettoyer toute la session storage\r\n   * */\n  clean: () => {\n    this.deleteUID();\n    sessionStorage.clear();\n  }\n};\n/**\r\n * @name User\r\n * @class\r\n * @classdesc Cette classe gère les utilisateurs du système (elle sera automatiquement instancié dans le contexte globale de l'application avec DataUserContext)\r\n */\n\nclass User {\n  /**\r\n   * @constructor\r\n   * @description cette\r\n   */\n  constructor() {\n    this.findAll = () => this.users;\n\n    this.findById = id => this.users[this.users.findIndex(elt => elt.id === id)];\n\n    this.findByToken = token => this.users[this.users.findIndex(elt => elt.token === token)];\n\n    this._findByLogin = username => this.users[this.users.findIndex(elt => elt.username === username)];\n\n    this._findByEmail = email => this.users[this.users.findIndex(elt => elt.email === email)];\n\n    this.login = ([field, is_email], password, session) => {\n      const userLogged = is_email ? this._findByEmail(field) : this._findByLogin(field);\n\n      if (!!userLogged && userLogged.password === password) {\n        session.setUID(userLogged.id);\n        return {\n          response: true,\n          message: `Bon retour parmi nous ${userLogged.nom}`,\n          data: userLogged\n        };\n      }\n\n      return {\n        response: false,\n        message: !!userLogged ? \"Mot de passe incorrect\" : \"Nom d'utilisateur ou Email incorrect\"\n      };\n    };\n\n    this.logout = () => sessionStorage.removeItem('id');\n\n    this.passwordReset = email => console.log(\"Mot de passe changé\");\n\n    this.users = [{\n      id: 1,\n      token: \"token 1\",\n      username: \"admin\",\n      password: \"admin\",\n      email: \"email@email.com\",\n      nom: \"nom admin\",\n      prenom: \"prenom admin\",\n      pays: \"Cameroun\",\n      adresse: \"adresse admin\",\n      statut: true,\n      role: \"ADMIN\"\n    }, {\n      id: 6,\n      token: \"token 6\",\n      username: \"westbook\",\n      password: \"77539953\",\n      email: \"westbook90@email.com\",\n      nom: \"SOCGNA\",\n      prenom: \"Childéric\",\n      pays: \"Cameroun\",\n      adresse: \"Yaoundé 345125, Nsimeyoung\",\n      statut: true,\n      role: \"ADMIN\"\n    }, {\n      id: 2,\n      token: \"token 2\",\n      username: \"username 2\",\n      password: \"password 2\",\n      email: \"email2@email.com\",\n      nom: \"nom 2\",\n      prenom: \"prenom 2\",\n      pays: \"Cameroun\",\n      adresse: \"adresse 2\",\n      statut: true,\n      role: \"USER\"\n    }, {\n      id: 3,\n      token: \"token 3\",\n      username: \"username 3\",\n      password: \"password 3\",\n      email: \"email3@email.com\",\n      nom: \"nom 3\",\n      prenom: \"prenom 3\",\n      pays: \"Cameroun\",\n      adresse: \"adresse 3\",\n      statut: true,\n      role: \"USER\"\n    }, {\n      id: 4,\n      username: \"username 4\",\n      password: \"password 4\",\n      token: \"token 4\",\n      nom: \"nom 4\",\n      prenom: \"prenom 4\",\n      pays: \"Cameroun\",\n      adresse: \"adresse 4\",\n      statut: true,\n      role: \"USER\"\n    }, {\n      id: 5,\n      username: \"username 5\",\n      password: \"password 5\",\n      token: \"token 5\",\n      nom: \"nom 5\",\n      prenom: \"prenom 5\",\n      pays: \"Cameroun\",\n      adresse: \"adresse 5\",\n      statut: true,\n      role: \"USER\"\n    }];\n  }\n  /**\r\n   * Liste tous les utilisateurs du système (Clients comme administrateur)\r\n   * @return {({password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string})[]}\r\n   */\n\n\n}\n\nexport { User, Session };","map":{"version":3,"sources":["C:/Users/westb/Documents/PROJET/FuelTracker/client_web/src/utils/Data.js"],"names":["Session","getUID","sessionStorage","getItem","setUID","id","setItem","deleteUID","removeItem","clean","clear","User","constructor","findAll","users","findById","findIndex","elt","findByToken","token","_findByLogin","username","_findByEmail","email","login","field","is_email","password","session","userLogged","response","message","nom","data","logout","passwordReset","console","log","prenom","pays","adresse","statut","role"],"mappings":"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","sourcesContent":["/**\r\n * @author SK Childéric\r\n * @version 0.0.2\r\n * @description Ce module s'occupe de tout l'aspect Données (Interaction avec la base de données)\r\n */\r\n\r\n\r\n\r\n/**\r\n * @name Session\r\n * @class\r\n * @classdesc Cette classe permet de gérer la session locale de l'utlisateur\r\n * @type {{getUID: (function(): string), deleteUID: (function(): void), setUID: (function(*=): void), clean: Session.clean}}\r\n */\r\nconst Session = {\r\n\r\n    /**\r\n     * @description retourne l'uid de la session storage\r\n     * @return {string}\r\n     */\r\n    getUID: () => sessionStorage.getItem('uid'),\r\n\r\n\r\n    /**\r\n     * @description modifie le token et l'utilisateur de la session storage\r\n     * */\r\n    setUID: (id) => sessionStorage.setItem('uid', id),\r\n\r\n\r\n    /**\r\n     * @description supprimer l'uid de la session storage\r\n     * */\r\n    deleteUID: () => sessionStorage.removeItem('uid'),\r\n\r\n\r\n    /**\r\n     * nettoyer toute la session storage\r\n     * */\r\n    clean: () => {\r\n        this.deleteUID();\r\n        sessionStorage.clear();\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * @name User\r\n * @class\r\n * @classdesc Cette classe gère les utilisateurs du système (elle sera automatiquement instancié dans le contexte globale de l'application avec DataUserContext)\r\n */\r\nclass User {\r\n\r\n    /**\r\n     * @constructor\r\n     * @description cette\r\n     */\r\n    constructor() {\r\n        this.users = [\r\n            {\r\n                id: 1, token: \"token 1\",\r\n                username: \"admin\", password: \"admin\", email:\"email@email.com\",\r\n                nom: \"nom admin\", prenom: \"prenom admin\",\r\n                pays: \"Cameroun\", adresse: \"adresse admin\",\r\n                statut: true, role: \"ADMIN\"\r\n            },\r\n\r\n            {\r\n                id: 6, token: \"token 6\",\r\n                username: \"westbook\", password: \"77539953\", email:\"westbook90@email.com\",\r\n                nom: \"SOCGNA\", prenom: \"Childéric\",\r\n                pays: \"Cameroun\", adresse: \"Yaoundé 345125, Nsimeyoung\",\r\n                statut: true, role: \"ADMIN\"\r\n            },\r\n\r\n            {\r\n                id: 2, token: \"token 2\",\r\n                username: \"username 2\", password: \"password 2\", email:\"email2@email.com\",\r\n                nom: \"nom 2\", prenom: \"prenom 2\",\r\n                pays: \"Cameroun\", adresse: \"adresse 2\",\r\n                statut: true, role: \"USER\"\r\n            },\r\n\r\n            {\r\n                id: 3, token: \"token 3\",\r\n                username: \"username 3\", password: \"password 3\", email:\"email3@email.com\",\r\n                nom: \"nom 3\", prenom: \"prenom 3\",\r\n                pays: \"Cameroun\", adresse: \"adresse 3\",\r\n                statut: true, role: \"USER\"\r\n            },\r\n\r\n            {\r\n                id: 4, username: \"username 4\", password: \"password 4\", token: \"token 4\",\r\n                nom: \"nom 4\", prenom: \"prenom 4\", pays: \"Cameroun\", adresse: \"adresse 4\",\r\n                statut: true, role: \"USER\"\r\n            },\r\n\r\n            {\r\n                id: 5, username: \"username 5\", password: \"password 5\", token: \"token 5\",\r\n                nom: \"nom 5\", prenom: \"prenom 5\", pays: \"Cameroun\", adresse: \"adresse 5\",\r\n                statut: true, role: \"USER\"\r\n            },\r\n        ]\r\n    }\r\n\r\n\r\n    /**\r\n     * Liste tous les utilisateurs du système (Clients comme administrateur)\r\n     * @return {({password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string})[]}\r\n     */\r\n    findAll = () => this.users;\r\n\r\n\r\n    /**\r\n     * Liste les informations d'un seul utilisateur\r\n     * @param id\r\n     * @return {{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|*}\r\n     */\r\n    findById = id => this.users[this.users.findIndex(elt => elt.id === id)];\r\n\r\n    findByToken = token => this.users[this.users.findIndex(elt => elt.token === token)];\r\n\r\n    /**\r\n     * Recherche les utilisateurs en fonction du nom d'utlisateur\r\n     * @param username\r\n     * @return {{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|*}\r\n     * @private\r\n     */\r\n    _findByLogin = (username) => this.users[this.users.findIndex(elt => elt.username === username)];\r\n\r\n\r\n    /**\r\n     * Recherche les utilisateurs en fonction de l'email\r\n     * @param email\r\n     * @return {{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|*}\r\n     * @private\r\n     */\r\n    _findByEmail = (email) => this.users[this.users.findIndex(elt => elt.email === email)];\r\n\r\n\r\n    /**\r\n     * Connecte l'utilisateur au système, ceci en fonction de nom d'utilisateur ou de l'email\r\n     * @param field (email ou non d'utlisateur)\r\n     * @param is_email\r\n     * @param password\r\n     * @param session\r\n     * @return {{data: ({password: string, role: string, adresse: string, id: number, nom: string, prenom: string, email: string, statut: boolean, token: string, username: string, pays: string}|{password: string, role: string, adresse: string, id: number, nom: string, prenom: string, statut: boolean, username: string, token: string, pays: string}|*), response: boolean, message: string}|{response: boolean, message: string}}\r\n     */\r\n    login = ([field, is_email], password, session) => {\r\n        const userLogged = is_email ? this._findByEmail(field) : this._findByLogin(field);\r\n        if (!!userLogged && userLogged.password === password){\r\n            session.setUID(userLogged.id);\r\n            return {response: true, message: `Bon retour parmi nous ${userLogged.nom}`, data: userLogged}\r\n        }\r\n        return {response: false, message: !!userLogged ? \"Mot de passe incorrect\" : \"Nom d'utilisateur ou Email incorrect\"}\r\n    };\r\n\r\n\r\n    /**\r\n     * \r\n     */\r\n    logout = () => sessionStorage.removeItem('id');\r\n\r\n    passwordReset = email => console.log(\"Mot de passe changé\")\r\n}\r\n\r\n\r\nexport {User, Session}"]},"metadata":{},"sourceType":"module"}